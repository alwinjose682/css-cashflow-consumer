package io.alw.css.cashflowconsumer.domain.mapper.rule;
unit RevisionTypeResolverUnit;

dialect "java";

import io.alw.css.domain.cashflow.TradeEventAction;
import io.alw.css.domain.cashflow.TradeEventType;
import io.alw.css.domain.cashflow.RevisionType;

rule "TradeType: ALL, Cashflow: FIRST -> RevisionType: NEW"
    no-loop true
when
    $c: /context[   firstCashflow == true,
                    tradeEventAction == TradeEventAction.ADD,
                    tradeEventType == TradeEventType.NEW_TRADE || == TradeEventType.REBOOK ]
then
    $c.setResult(RevisionType.NEW); // Just update the value. drools does not need to know this state change
    System.out.println("Rule-1");
end
